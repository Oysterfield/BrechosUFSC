<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brechós UFSC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Cabeçalho -->
    <header class="bg-white shadow-md sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <a href="#home" class="text-3xl font-bold text-emerald-600">Brechós UFSC</a>
            <nav class="hidden md:flex space-x-6">
                <a href="#home" class="text-gray-600 hover:text-emerald-500">Início</a>
                <a href="#shop" class="text-gray-600 hover:text-emerald-500">Loja</a>
                <a href="#about" class="text-gray-600 hover:text-emerald-500">Sobre Nós</a>
                <a href="#contact" class="text-gray-600 hover:text-emerald-500">Contato</a>
            </nav>
            <div class="flex items-center space-x-4">
                <button id="cartButton" class="relative text-gray-600 hover:text-emerald-500">
                    <i class="fas fa-shopping-cart fa-lg"></i>
                    <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </button>
                <button id="mobileMenuButton" class="md:hidden text-gray-600 hover:text-emerald-500">
                    <i class="fas fa-bars fa-lg"></i>
                </button>
            </div>
        </div>
        <!-- Menu Mobile -->
        <div id="mobileMenu" class="hidden md:hidden bg-white shadow-lg">
            <a href="#home" class="block px-4 py-2 text-gray-600 hover:bg-emerald-50 hover:text-emerald-500">Início</a>
            <a href="#shop" class="block px-4 py-2 text-gray-600 hover:bg-emerald-50 hover:text-emerald-500">Loja</a>
            <a href="#about" class="block px-4 py-2 text-gray-600 hover:bg-emerald-50 hover:text-emerald-500">Sobre Nós</a>
            <a href="#contact" class="block px-4 py-2 text-gray-600 hover:bg-emerald-50 hover:text-emerald-500">Contato</a>
        </div>
    </header>

    <!-- Conteúdo da Página Principal - Carregado dinamicamente -->
    <main id="pageContent">
        <!-- O conteúdo será carregado aqui pelo JavaScript -->
    </main>

    <!-- Rodapé -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-2">&copy; 2024 Brechós UFSC. Todos os direitos reservados.</p>
            <p class="text-sm text-gray-400">Moda sustentável para um futuro melhor.</p>
            <div class="mt-4">
                <a href="#" class="text-gray-400 hover:text-white mx-2"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="text-gray-400 hover:text-white mx-2"><i class="fab fa-instagram"></i></a>
                <a href="#" class="text-gray-400 hover:text-white mx-2"><i class="fab fa-twitter"></i></a>
            </div>
        </div>
    </footer>

    <!-- Modal do Carrinho -->
    <div id="cartModal" class="modal">
        <div class="modal-content bg-white p-6 rounded-lg shadow-xl">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold text-gray-700">Seu Carrinho</h2>
                <button id="closeCartModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div id="cartItemsContainer" class="mb-6 max-h-96 overflow-y-auto">
                <!-- Itens do carrinho serão inseridos aqui -->
                <p class="text-gray-500">Seu carrinho está vazio.</p>
            </div>
            <div class="border-t pt-4">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-lg font-semibold text-gray-700">Subtotal:</span>
                    <span id="cartSubtotal" class="text-lg font-semibold text-emerald-600">R$ 0,00</span>
                </div>
                 <button id="checkoutButton" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-3 px-4 rounded-lg transition duration-300 disabled:opacity-50" disabled>Finalizar Compra</button>
                 <button id="clearCartButton" class="w-full mt-2 bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-300">Limpar Carrinho</button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmação -->
    <div id="confirmationModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeConfirmationModal()">&times;</span>
            <p id="confirmationMessage" class="text-center text-lg py-4"></p>
            <div class="flex justify-center">
                <button onclick="closeConfirmationModal()" class="bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-2 px-6 rounded-lg transition duration-300">OK</button>
            </div>
        </div>
    </div>


    <script>
        // Simulação de dados de produtos
        const allProducts = [
            { id: 1, name: 'Casaco Vintage Lã', price: 79.90, image: 'https://placehold.co/300x300/e0f2fe/0ea5e9?text=Casaco+Vintage', category: 'feminino', description: 'Lindo casaco de lã vintage, perfeito para o inverno. Peça única e cheia de estilo.' },
            { id: 2, name: 'Vestido Floral Verão', price: 59.90, image: 'https://placehold.co/300x300/fef3c7/f59e0b?text=Vestido+Floral', category: 'feminino', description: 'Vestido leve e solto com estampa floral, ideal para os dias quentes de verão.' },
            { id: 3, name: 'Bolsa de Couro Artesanal', price: 120.00, image: 'https://placehold.co/300x300/fce7f3/ec4899?text=Bolsa+Couro', category: 'acessorios', description: 'Bolsa de couro legítimo feita à mão, com design exclusivo e durabilidade.' },
            { id: 4, name: 'Sapato Social Masculino', price: 99.00, image: 'https://placehold.co/300x300/ccfbf1/14b8a6?text=Sapato+Social', category: 'masculino', description: 'Sapato social elegante e confortável, perfeito para ocasiões formais ou trabalho.' },
            { id: 5, name: 'Camisa Jeans Masculina', price: 69.90, image: 'https://placehold.co/300x300/dbeafe/3b82f6?text=Camisa+Jeans', category: 'masculino', description: 'Camisa jeans estilosa e versátil, combina com diversos looks casuais.' },
            { id: 6, name: 'Saia Midi Plissada', price: 75.00, image: 'https://placehold.co/300x300/f3e8ff/a855f7?text=Saia+Midi', category: 'feminino', description: 'Saia midi plissada elegante, perfeita para um look moderno e sofisticado.' },
            { id: 7, name: 'Tênis Casual Unissex', price: 110.00, image: 'https://placehold.co/300x300/f0fdf4/22c55e?text=Tenis+Casual', category: 'acessorios', description: 'Tênis casual confortável e moderno, ideal para o dia a dia.' },
            { id: 8, name: 'Macacão Infantil Estampado', price: 45.00, image: 'https://placehold.co/300x300/fff7ed/fb923c?text=Macacao+Infantil', category: 'infantil', description: 'Macacão infantil divertido e confortável, com estampa alegre.' },
            { id: 9, name: 'Chapéu de Palha', price: 35.00, image: 'https://placehold.co/300x300/fefce8/eab308?text=Chapeu+Palha', category: 'acessorios', description: 'Chapéu de palha charmoso, perfeito para proteger do sol com estilo.' },
            { id: 10, name: 'Luminária Retrô', price: 89.00, image: 'https://placehold.co/300x300/ecfdf5/10b981?text=Luminaria+Retro', category: 'casa', description: 'Luminária de mesa com design retrô, adiciona um toque vintage à decoração.' },
            { id: 11, name: 'Óculos de Sol Redondo', price: 55.00, image: 'https://placehold.co/300x300/fdf2f8/db2777?text=Oculos+Sol', category: 'acessorios', description: 'Óculos de sol com armação redonda, um clássico que nunca sai de moda.' },
            { id: 12, name: 'Jaqueta Bomber Masculina', price: 130.00, image: 'https://placehold.co/300x300/eef2ff/6366f1?text=Jaqueta+Bomber', category: 'masculino', description: 'Jaqueta bomber masculina moderna e confortável, ideal para meia estação.' },
        ];

        let cart = [];

        const pageContent = document.getElementById('pageContent');
        const cartButton = document.getElementById('cartButton');
        const cartModal = document.getElementById('cartModal');
        const closeCartModalButton = document.getElementById('closeCartModal');
        const cartItemsContainer = document.getElementById('cartItemsContainer');
        const cartCount = document.getElementById('cartCount');
        const cartSubtotalElement = document.getElementById('cartSubtotal');
        const checkoutButton = document.getElementById('checkoutButton');
        const clearCartButton = document.getElementById('clearCartButton');
        const mobileMenuButton = document.getElementById('mobileMenuButton');
        const mobileMenu = document.getElementById('mobileMenu');
        const confirmationModal = document.getElementById('confirmationModal');
        const confirmationMessage = document.getElementById('confirmationMessage');

        // Funções do Modal de Confirmação
        function showConfirmationModal(message) {
            confirmationMessage.textContent = message;
            confirmationModal.style.display = "block";
        }

        function closeConfirmationModal() {
            confirmationModal.style.display = "none";
        }

        // Fechar modal se clicar fora
        window.onclick = function(event) {
            if (event.target == cartModal) {
                cartModal.style.display = "none";
            }
            if (event.target == confirmationModal) {
                confirmationModal.style.display = "none";
            }
        }

        // Navegação e carregamento de conteúdo
        function navigateTo(pageId, categoryFilter = null) {
            pageContent.innerHTML = ''; // Limpa o conteúdo da página

            let effectivePageId = pageId; 

            if (pageId === 'home') {
                loadHomePage();
            } else if (pageId === 'shop') {
                loadShopPage(categoryFilter);
            } else if (pageId === 'about') {
                loadAboutPage();
            } else if (pageId === 'contact') {
                loadContactPage();
            } else if (pageId.startsWith('product-')) {
                const productId = parseInt(pageId.split('-')[1]);
                loadProductDetailPage(productId);
            } else {
                console.warn(`Unknown pageId: '${pageId}', navigating to home.`);
                loadHomePage();
                effectivePageId = 'home'; 
            }
            window.scrollTo(0, 0);
            updateURL(effectivePageId); 
        }

        function loadHomePage() {
            const homeHTML = `
                <section id="home" class="hero-bg text-white py-20 md:py-32">
                    <div class="container mx-auto px-4 text-center">
                        <h1 class="text-4xl md:text-6xl font-bold mb-6">Descubra Tesouros Escondidos</h1>
                        <p class="text-lg md:text-xl mb-8">Moda sustentável e peças únicas com preços incríveis.</p>
                        <a href="#shop" onclick="navigateTo('shop')" class="bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-3 px-8 rounded-lg text-lg transition duration-300">Ver Produtos</a>
                    </div>
                </section>
                <section id="featured-products" class="py-16">
                    <div class="container mx-auto px-4">
                        <h2 class="text-3xl font-bold text-center mb-12 text-gray-700">Em Destaque</h2>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                            ${allProducts.slice(0, 4).map(product => `
                                <div class="product-card bg-white rounded-lg shadow-lg overflow-hidden transition-all duration-300">
                                    <img src="${product.image}" alt="${product.name}" class="w-full h-64 object-cover cursor-pointer" onclick="navigateTo('product-${product.id}')">
                                    <div class="p-6">
                                        <h3 class="text-xl font-semibold mb-2 text-gray-800 cursor-pointer" onclick="navigateTo('product-${product.id}')">${product.name}</h3>
                                        <p class="text-gray-600 mb-1">Ref: #${product.id}</p>
                                        <p class="text-emerald-500 font-bold text-lg mb-4">R$ ${product.price.toFixed(2).replace('.', ',')}</p>
                                        <button onclick='addToCart(${JSON.stringify(product)})' class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-300">Adicionar ao Carrinho</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </section>
                <section id="categories" class="bg-emerald-50 py-16">
                    <div class="container mx-auto px-4">
                        <h2 class="text-3xl font-bold text-center mb-12 text-gray-700">Navegue por Categorias</h2>
                        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6">
                            <a href="#shop" onclick="navigateTo('shop', 'feminino')" class="category-link group block bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 text-center">
                                <i class="fas fa-female fa-3x text-emerald-500 mb-3 group-hover:text-emerald-600 transition-colors"></i>
                                <span class="block font-semibold text-gray-700 group-hover:text-emerald-600">Feminino</span>
                            </a>
                            <a href="#shop" onclick="navigateTo('shop', 'masculino')" class="category-link group block bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 text-center">
                                <i class="fas fa-male fa-3x text-emerald-500 mb-3 group-hover:text-emerald-600 transition-colors"></i>
                                <span class="block font-semibold text-gray-700 group-hover:text-emerald-600">Masculino</span>
                            </a>
                            <a href="#shop" onclick="navigateTo('shop', 'infantil')" class="category-link group block bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 text-center">
                                <i class="fas fa-child fa-3x text-emerald-500 mb-3 group-hover:text-emerald-600 transition-colors"></i>
                                <span class="block font-semibold text-gray-700 group-hover:text-emerald-600">Infantil</span>
                            </a>
                            <a href="#shop" onclick="navigateTo('shop', 'acessorios')" class="category-link group block bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 text-center">
                                <i class="fas fa-gem fa-3x text-emerald-500 mb-3 group-hover:text-emerald-600 transition-colors"></i>
                                <span class="block font-semibold text-gray-700 group-hover:text-emerald-600">Acessórios</span>
                            </a>
                            <a href="#shop" onclick="navigateTo('shop', 'casa')" class="category-link group block bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 text-center col-span-2 sm:col-span-1">
                                <i class="fas fa-home fa-3x text-emerald-500 mb-3 group-hover:text-emerald-600 transition-colors"></i>
                                <span class="block font-semibold text-gray-700 group-hover:text-emerald-600">Casa & Decor</span>
                            </a>
                        </div>
                    </div>
                </section>
            `;
            pageContent.innerHTML = homeHTML;
            updateActiveLink('home');
        }

        function loadShopPage(categoryFilter = null) {
            let productsToDisplay = allProducts;
            if (categoryFilter) {
                productsToDisplay = allProducts.filter(p => p.category === categoryFilter);
            }

            const shopHTML = `
                <section id="shop-page" class="py-16">
                    <div class="container mx-auto px-4">
                        <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                            <h2 class="text-3xl font-bold text-gray-700 mb-4 md:mb-0">Nossa Loja ${categoryFilter ? `- ${categoryFilter.charAt(0).toUpperCase() + categoryFilter.slice(1)}` : ''}</h2>
                            <div class="flex space-x-2">
                                <select id="filterCategory" class="p-2 border rounded-md bg-white shadow-sm">
                                    <option value="">Todas Categorias</option>
                                    <option value="feminino" ${categoryFilter === 'feminino' ? 'selected' : ''}>Feminino</option>
                                    <option value="masculino" ${categoryFilter === 'masculino' ? 'selected' : ''}>Masculino</option>
                                    <option value="infantil" ${categoryFilter === 'infantil' ? 'selected' : ''}>Infantil</option>
                                    <option value="acessorios" ${categoryFilter === 'acessorios' ? 'selected' : ''}>Acessórios</option>
                                    <option value="casa" ${categoryFilter === 'casa' ? 'selected' : ''}>Casa & Decor</option>
                                </select>
                                <select id="sortProducts" class="p-2 border rounded-md bg-white shadow-sm">
                                    <option value="default">Padrão</option>
                                    <option value="price-asc">Preço: Menor para Maior</option>
                                    <option value="price-desc">Preço: Maior para Menor</option>
                                    <option value="name-asc">Nome: A-Z</option>
                                    <option value="name-desc">Nome: Z-A</option>
                                </select>
                            </div>
                        </div>
                        <div id="productList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                            ${productsToDisplay.length > 0 ? productsToDisplay.map(product => `
                                <div class="product-card bg-white rounded-lg shadow-lg overflow-hidden transition-all duration-300">
                                    <img src="${product.image}" alt="${product.name}" class="w-full h-64 object-cover cursor-pointer" onclick="navigateTo('product-${product.id}')">
                                    <div class="p-6">
                                        <h3 class="text-xl font-semibold mb-2 text-gray-800 cursor-pointer" onclick="navigateTo('product-${product.id}')">${product.name}</h3>
                                        <p class="text-gray-600 mb-1">Ref: #${product.id}</p>
                                        <p class="text-emerald-500 font-bold text-lg mb-4">R$ ${product.price.toFixed(2).replace('.', ',')}</p>
                                        <button onclick='addToCart(${JSON.stringify(product)})' class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-300">Adicionar ao Carrinho</button>
                                    </div>
                                </div>
                            `).join('') : '<p class="col-span-full text-center text-gray-500 text-xl">Nenhum produto encontrado nesta categoria.</p>'}
                        </div>
                    </div>
                </section>
            `;
            pageContent.innerHTML = shopHTML;

            document.getElementById('filterCategory').addEventListener('change', (e) => {
                loadShopPage(e.target.value || null);
            });
            document.getElementById('sortProducts').addEventListener('change', (e) => {
                sortAndDisplayProducts(e.target.value, categoryFilter);
            });
            updateActiveLink('shop');
        }

        function sortAndDisplayProducts(sortType, currentCategoryFilter) {
            let productsToDisplay = currentCategoryFilter ? allProducts.filter(p => p.category === currentCategoryFilter) : [...allProducts];

            switch (sortType) {
                case 'price-asc':
                    productsToDisplay.sort((a, b) => a.price - b.price);
                    break;
                case 'price-desc':
                    productsToDisplay.sort((a, b) => b.price - a.price);
                    break;
                case 'name-asc':
                    productsToDisplay.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                case 'name-desc':
                    productsToDisplay.sort((a, b) => b.name.localeCompare(a.name));
                    break;
                default: 
                    productsToDisplay = currentCategoryFilter ? allProducts.filter(p => p.category === currentCategoryFilter) : [...allProducts];
                    productsToDisplay.sort((a, b) => a.id - b.id);
                    break;
            }

            const productListContainer = document.getElementById('productList');
            productListContainer.innerHTML = productsToDisplay.length > 0 ? productsToDisplay.map(product => `
                <div class="product-card bg-white rounded-lg shadow-lg overflow-hidden transition-all duration-300">
                    <img src="${product.image}" alt="${product.name}" class="w-full h-64 object-cover cursor-pointer" onclick="navigateTo('product-${product.id}')">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2 text-gray-800 cursor-pointer" onclick="navigateTo('product-${product.id}')">${product.name}</h3>
                         <p class="text-gray-600 mb-1">Ref: #${product.id}</p>
                        <p class="text-emerald-500 font-bold text-lg mb-4">R$ ${product.price.toFixed(2).replace('.', ',')}</p>
                        <button onclick='addToCart(${JSON.stringify(product)})' class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-300">Adicionar ao Carrinho</button>
                    </div>
                </div>
            `).join('') : '<p class="col-span-full text-center text-gray-500 text-xl">Nenhum produto encontrado.</p>';
        }


        function loadProductDetailPage(productId) {
            const product = allProducts.find(p => p.id === productId);
            if (!product) {
                pageContent.innerHTML = `<p class="text-center py-20 text-xl text-red-500">Produto não encontrado!</p>`;
                updateActiveLink('shop'); 
                return;
            }

            const productDetailHTML = `
                <section id="product-detail" class="py-16 bg-gray-50">
                    <div class="container mx-auto px-4">
                        <button onclick="navigateTo('shop', '${product.category}')" class="mb-8 text-emerald-600 hover:text-emerald-700 font-semibold">
                            <i class="fas fa-arrow-left mr-2"></i> Voltar para ${product.category.charAt(0).toUpperCase() + product.category.slice(1)}
                        </button>
                        <div class="flex flex-col md:flex-row bg-white p-8 rounded-lg shadow-xl">
                            <div class="md:w-1/2 mb-6 md:mb-0 md:pr-8">
                                <img src="${product.image.replace('300x300', '600x600')}" alt="${product.name}" class="w-full h-auto object-cover rounded-lg shadow-md">
                            </div>
                            <div class="md:w-1/2">
                                <h2 class="text-3xl lg:text-4xl font-bold text-gray-800 mb-4">${product.name}</h2>
                                <p class="text-2xl text-emerald-600 font-semibold mb-6">R$ ${product.price.toFixed(2).replace('.', ',')}</p>
                                <p class="text-gray-600 mb-2"><span class="font-semibold">Categoria:</span> <a href="#shop" onclick="navigateTo('shop', '${product.category}')" class="text-emerald-500 hover:underline">${product.category.charAt(0).toUpperCase() + product.category.slice(1)}</a></p>
                                <p class="text-gray-600 mb-6"><span class="font-semibold">Referência:</span> #${product.id}</p>
                                <p class="text-gray-700 leading-relaxed mb-6">${product.description || 'Descrição não disponível.'}</p>
                                <div class="flex items-center mb-6">
                                    <label for="quantity-${product.id}" class="mr-3 font-semibold text-gray-700">Quantidade:</label>
                                    <input type="number" id="quantity-${product.id}" value="1" min="1" class="w-20 p-2 border rounded-md text-center">
                                </div>
                                <button onclick='addToCart(${JSON.stringify(product)}, document.getElementById("quantity-${product.id}").value)' class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-6 rounded-lg text-lg transition duration-300">
                                    <i class="fas fa-cart-plus mr-2"></i> Adicionar ao Carrinho
                                </button>
                            </div>
                        </div>

                        <div class="mt-16">
                            <h3 class="text-2xl font-bold text-gray-700 mb-8 text-center">Você também pode gostar</h3>
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                                ${allProducts.filter(p => p.category === product.category && p.id !== product.id).slice(0, 4).map(relatedProduct => `
                                    <div class="product-card bg-white rounded-lg shadow-lg overflow-hidden transition-all duration-300">
                                        <img src="${relatedProduct.image}" alt="${relatedProduct.name}" class="w-full h-56 object-cover cursor-pointer" onclick="navigateTo('product-${relatedProduct.id}')">
                                        <div class="p-4">
                                            <h4 class="text-lg font-semibold mb-1 text-gray-800 cursor-pointer" onclick="navigateTo('product-${relatedProduct.id}')">${relatedProduct.name}</h4>
                                            <p class="text-emerald-500 font-bold text-md mb-3">R$ ${relatedProduct.price.toFixed(2).replace('.', ',')}</p>
                                            <button onclick='addToCart(${JSON.stringify(relatedProduct)})' class="w-full bg-emerald-400 hover:bg-emerald-500 text-white font-semibold py-2 px-3 rounded-md text-sm transition duration-300">Adicionar</button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </section>
            `;
            pageContent.innerHTML = productDetailHTML;
            updateActiveLink('shop'); 
        }


        function loadAboutPage() {
            const aboutHTML = `
                <section id="about-page" class="py-16 bg-white">
                    <div class="container mx-auto px-4">
                        <div class="max-w-3xl mx-auto text-center">
                            <h2 class="text-4xl font-bold text-emerald-600 mb-6">Sobre o Brechós UFSC</h2>
                            <img src="https://placehold.co/600x300/d1fae5/34d399?text=Nossa+Historia" alt="Sobre Nós" class="rounded-lg shadow-md mx-auto mb-8">
                            <p class="text-lg text-gray-700 leading-relaxed mb-4">
                                Bem-vindo ao Brechós UFSC! Somos apaixonados por moda sustentável e acreditamos que cada peça de roupa tem uma história para contar. Nosso objetivo é oferecer uma seleção cuidadosa de roupas e acessórios de segunda mão de alta qualidade, proporcionando achados incríveis que são gentis com o seu bolso e com o planeta.
                            </p>
                            <p class="text-lg text-gray-700 leading-relaxed mb-4">
                                No Brechós UFSC, você encontrará desde peças vintage raras até itens modernos e estilosos, todos selecionados com carinho. Acreditamos no poder da reutilização para reduzir o desperdício têxtil e promover um consumo mais consciente.
                            </p>
                            <p class="text-lg text-gray-700 leading-relaxed">
                                Junte-se a nós nessa jornada por um mundo da moda mais sustentável e cheio de personalidade!
                            </p>
                        </div>
                         <div class="mt-16 text-center">
                            <h3 class="text-2xl font-bold text-gray-700 mb-8">Nossos Valores</h3>
                            <div class="grid md:grid-cols-3 gap-8">
                                <div class="bg-emerald-50 p-6 rounded-lg shadow">
                                    <i class="fas fa-leaf fa-2x text-emerald-500 mb-3"></i>
                                    <h4 class="text-xl font-semibold text-emerald-700 mb-2">Sustentabilidade</h4>
                                    <p class="text-gray-600">Promovemos a moda circular e o consumo consciente.</p>
                                </div>
                                <div class="bg-emerald-50 p-6 rounded-lg shadow">
                                    <i class="fas fa-medal fa-2x text-emerald-500 mb-3"></i>
                                    <h4 class="text-xl font-semibold text-emerald-700 mb-2">Qualidade</h4>
                                    <p class="text-gray-600">Selecionamos peças em ótimo estado e com estilo.</p>
                                </div>
                                <div class="bg-emerald-50 p-6 rounded-lg shadow">
                                    <i class="fas fa-hand-holding-heart fa-2x text-emerald-500 mb-3"></i>
                                    <h4 class="text-xl font-semibold text-emerald-700 mb-2">Comunidade</h4>
                                    <p class="text-gray-600">Conectamos amantes de brechós e achados únicos.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            `;
            pageContent.innerHTML = aboutHTML;
            updateActiveLink('about');
        }

        function loadContactPage() {
            const contactHTML = `
                <section id="contact-page" class="py-16">
                    <div class="container mx-auto px-4">
                        <div class="max-w-2xl mx-auto bg-white p-8 md:p-12 rounded-xl shadow-2xl">
                            <h2 class="text-3xl md:text-4xl font-bold text-emerald-600 mb-8 text-center">Entre em Contato</h2>
                            <form id="contactForm">
                                <div class="mb-6">
                                    <label for="name" class="block text-gray-700 font-semibold mb-2">Nome Completo</label>
                                    <input type="text" id="name" name="name" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition-shadow">
                                </div>
                                <div class="mb-6">
                                    <label for="email" class="block text-gray-700 font-semibold mb-2">Seu E-mail</label>
                                    <input type="email" id="email" name="email" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition-shadow">
                                </div>
                                <div class="mb-6">
                                    <label for="subject" class="block text-gray-700 font-semibold mb-2">Assunto</label>
                                    <input type="text" id="subject" name="subject" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition-shadow">
                                </div>
                                <div class="mb-8">
                                    <label for="message" class="block text-gray-700 font-semibold mb-2">Sua Mensagem</label>
                                    <textarea id="message" name="message" rows="5" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition-shadow"></textarea>
                                </div>
                                <button type="submit" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-6 rounded-lg text-lg transition duration-300 ease-in-out transform hover:scale-105">
                                    <i class="fas fa-paper-plane mr-2"></i> Enviar Mensagem
                                </button>
                            </form>
                        </div>
                        <div class="mt-12 text-center">
                             <h3 class="text-2xl font-semibold text-gray-700 mb-4">Ou nos encontre em:</h3>
                             <p class="text-lg text-gray-600"><i class="fas fa-phone-alt text-emerald-500 mr-2"></i>(00) 12345-6789</p>
                        </div>
                    </div>
                </section>
            `;
            pageContent.innerHTML = contactHTML;
            document.getElementById('contactForm').addEventListener('submit', function(e) {
                e.preventDefault();
                showConfirmationModal('Mensagem enviada com sucesso! Entraremos em contato em breve.');
                this.reset();
            });
            updateActiveLink('contact');
        }

        function updateActiveLink(pageId) {
            document.querySelectorAll('header nav a, #mobileMenu a').forEach(link => {
                link.classList.remove('text-emerald-500', 'font-semibold');
                link.classList.add('text-gray-600');
                const activePage = pageId.startsWith('product-') ? 'shop' : pageId;
                if (link.getAttribute('href') === `#${activePage}`) {
                    link.classList.add('text-emerald-500', 'font-semibold');
                }
            });
        }

        // Funcionalidade do Carrinho
        function addToCart(product, quantity = 1) {
            const qty = parseInt(quantity);
            if (isNaN(qty) || qty < 1) {
                showConfirmationModal("Quantidade inválida.");
                return;
            }

            const existingProductIndex = cart.findIndex(item => item.id === product.id);
            if (existingProductIndex > -1) {
                cart[existingProductIndex].quantity += qty;
            } else {
                cart.push({ ...product, quantity: qty });
            }
            updateCartDisplay();
            showConfirmationModal(`${qty}x ${product.name} adicionado(s) ao carrinho!`);
        }

        function updateCartDisplay() {
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-gray-500">Seu carrinho está vazio.</p>';
                checkoutButton.disabled = true;
                checkoutButton.classList.add('disabled:opacity-50');
            } else {
                cartItemsContainer.innerHTML = cart.map(item => `
                    <div class="flex justify-between items-center py-3 border-b last:border-b-0">
                        <div class="flex items-center">
                            <img src="${item.image.replace('300x300', '100x100')}" alt="${item.name}" class="w-16 h-16 object-cover rounded mr-4">
                            <div>
                                <h4 class="font-semibold text-gray-700">${item.name}</h4>
                                <p class="text-sm text-gray-500">R$ ${item.price.toFixed(2).replace('.', ',')} x ${item.quantity}</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                             <p class="text-emerald-600 font-semibold mr-4">R$ ${(item.price * item.quantity).toFixed(2).replace('.', ',')}</p>
                             <button onclick="removeFromCart(${item.id})" class="text-red-500 hover:text-red-700"><i class="fas fa-trash-alt"></i></button>
                        </div>
                    </div>
                `).join('');
                checkoutButton.disabled = false;
                checkoutButton.classList.remove('disabled:opacity-50');
            }

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartSubtotalElement.textContent = `R$ ${subtotal.toFixed(2).replace('.', ',')}`;
            cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartDisplay();
        }
        
        function clearCart() {
            if (cart.length > 0) {
                cart = [];
                updateCartDisplay();
                showConfirmationModal("Carrinho esvaziado!");
            }
        }

        // Event Listeners
        cartButton.addEventListener('click', () => {
            cartModal.style.display = 'block';
            updateCartDisplay();
        });

        closeCartModalButton.addEventListener('click', () => {
            cartModal.style.display = 'none';
        });
        
        clearCartButton.addEventListener('click', clearCart);

        checkoutButton.addEventListener('click', () => {
            if (cart.length > 0) {
                showConfirmationModal(`Compra finalizada! Total: ${cartSubtotalElement.textContent}. (Isto é uma simulação)`);
                cart = [];
                updateCartDisplay();
                cartModal.style.display = 'none';
            } else {
                showConfirmationModal("Seu carrinho está vazio.");
            }
        });

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Configurar links de navegação
        document.querySelectorAll('header nav a, #mobileMenu a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const pageId = link.getAttribute('href').substring(1);
                navigateTo(pageId);
                if (!mobileMenu.classList.contains('hidden')) {
                    mobileMenu.classList.add('hidden');
                }
            });
        });
        
        // Atualizar a URL ao navegar e guardar estado
        function updateURL(pageId) {
            if (pageId) {
                // Só faz pushState se a nova página for diferente da página no estado atual do histórico,
                // ou se não houver estado (caso raro, mas para segurança).
                if (!history.state || history.state.page !== pageId) {
                    history.pushState({ page: pageId }, '', `#${pageId}`);
                }
            }
        }

        // Carregar página inicial ao carregar o DOM e configurar estado inicial do histórico
        document.addEventListener('DOMContentLoaded', () => {
            const initialHash = window.location.hash.substring(1);
            let targetPage = 'home';

            if (initialHash) {
                if (initialHash.startsWith('product-') || ['home', 'shop', 'about', 'contact'].includes(initialHash)) {
                    targetPage = initialHash;
                }
            }
            // Define o estado inicial do histórico. Não cria uma nova entrada no histórico.
            history.replaceState({ page: targetPage }, '', `#${targetPage}`);
            navigateTo(targetPage); // Navega para a página alvo. updateURL dentro de navigateTo não fará push de um novo estado porque corresponde ao estado substituído.
            updateCartDisplay();
        });

        // Lidar com o botão voltar/avançar do navegador
        window.addEventListener('popstate', (event) => {
            let targetPage = 'home'; 
            if (event.state && event.state.page) { // Fonte primária da verdade
                targetPage = event.state.page;
            } else { // Fallback se o estado for nulo (ex: utilizador alterou manualmente o hash)
                const hash = window.location.hash.substring(1);
                if (hash) {
                    if (hash.startsWith('product-') || ['home', 'shop', 'about', 'contact'].includes(hash)) {
                        targetPage = hash;
                    }
                }
            }
            navigateTo(targetPage); // Quando popstate ocorre, navigateTo carrega o conteúdo.
                                  // updateURL dentro de navigateTo NÃO deve fazer push de um novo estado aqui,
                                  // pois estamos a navegar PARA um estado existente.
        });

    </script>
</body>
</html>
